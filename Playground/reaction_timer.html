<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Reaction Timer</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        background-color: #111;
        color: white;
        font-family: "Segoe UI", sans-serif;
        height: 100vh;
        margin: 0;
        user-select: none;
        cursor: pointer;
      }

      .container-fluid {
        height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
      }

      .lights {
        width: 100px;
        margin: 0 auto 20px;
        padding: 20px;
        background: #222;
        border-radius: 20px;
      }

      .light {
        width: 60px;
        height: 60px;
        margin: 10px auto;
        border-radius: 50%;
        background: #333;
        transition: background 0.3s ease;
      }

      .red.active {
        background: red;
      }

      .yellow.active {
        background: yellow;
      }

      .green.active {
        background: limegreen;
      }

      .message {
        font-size: 1.5rem;
        margin-bottom: 20px;
        white-space: pre-line;
      }

      button {
        margin: 5px;
      }

      @media (max-width: 576px) {
        .light {
          width: 50px;
          height: 50px;
        }
        .message {
          font-size: 1.25rem;
        }
      }
    </style>
  </head>
  <body>
    <div class="container-fluid" id="screen">
      <div class="col-12 col-md-6 col-lg-4">
        <div class="lights">
          <div class="light red"></div>
          <div class="light yellow"></div>
          <div class="light green"></div>
        </div>
        <div class="message" id="message">Click "Start" to begin</div>
        <div class="d-flex justify-content-center">
          <button id="start" class="btn btn-outline-light">Start</button>
          <button
            id="restart"
            class="btn btn-outline-light"
            style="display: none"
          >
            Restart
          </button>
        </div>
      </div>
    </div>

    <script>
      const red = document.querySelector(".red");
      const yellow = document.querySelector(".yellow");
      const green = document.querySelector(".green");
      const message = document.getElementById("message");
      const restartBtn = document.getElementById("restart");
      const startBtn = document.getElementById("start");
      const screen = document.body;

      let greenTime = 0;
      let gameStarted = false;
      let clickable = false;
      let timeout1, timeout2, timeout3;

      function resetLights() {
        red.classList.remove("active");
        yellow.classList.remove("active");
        green.classList.remove("active");
      }

      function startGame() {
        resetLights();
        gameStarted = true;
        clickable = false;
        message.textContent = "Get ready...";
        startBtn.style.display = "none";
        restartBtn.style.display = "none";

        timeout1 = setTimeout(() => {
          red.classList.add("active");
          message.textContent = "3";
        }, 500);

        timeout2 = setTimeout(() => {
          resetLights();
          yellow.classList.add("active");
          message.textContent = "2";
        }, 1500);

        timeout3 = setTimeout(() => {
          resetLights();
          green.classList.add("active");
          greenTime = Date.now();
          clickable = true;
          message.textContent = "CLICK NOW!";
        }, 2500 + Math.random() * 1500);
      }

      screen.addEventListener("click", (e) => {
        if (!gameStarted) return;
        if (e.target === restartBtn || e.target === startBtn) return;

        if (!clickable) {
          clearTimeout(timeout1);
          clearTimeout(timeout2);
          clearTimeout(timeout3);
          message.textContent = "‚ùå Too early! You clicked before green.";
          gameStarted = false;
          resetLights();
          restartBtn.style.display = "inline-block";
        } else {
          const reactionTime = Date.now() - greenTime;

          let feedback = "";
          if (reactionTime <= 150) {
            feedback = "‚ö° Insane! Faster than an F1 driver!";
          } else if (reactionTime <= 200) {
            feedback = "üèÅ F1 Racer Reflexes!";
          } else if (reactionTime <= 250) {
            feedback = "üß† Gamer-level reflexes!";
          } else if (reactionTime <= 300) {
            feedback = "üö∂ Decent! Around human average.";
          } else if (reactionTime <= 400) {
            feedback = "üê¢ A bit slow. Try again!";
          } else {
            feedback = "üêå Slower than a sloth!";
          }

          message.textContent = `üî• Reaction time: ${reactionTime} ms\n${feedback}`;
          gameStarted = false;
          clickable = false;
          restartBtn.style.display = "inline-block";
        }
      });

      startBtn.addEventListener("click", (e) => {
        e.stopPropagation();
        startGame();
      });

      restartBtn.addEventListener("click", (e) => {
        e.stopPropagation();
        startGame();
      });
    </script>
  </body>
</html>
